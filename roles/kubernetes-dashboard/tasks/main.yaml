---

########################################
# Install Kubernetes Dashboard & Ingress
########################################

- name: Install Kubernetes Dashboard
  shell: |
    kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/master/aio/deploy/recommended.yaml
  args:
    executable: /bin/bash

- name: Add a Dashboard Admin user account
  shell: |
    kubectl apply -f {{ role_path }}/files/{{item}}.yaml
  args:
    executable: /bin/bash
  with_items:
    - ServiceAccount
    - ClusterRoleBinding

- import_role:
    name: helm-nginx-ingress
  vars:
    namespace: kubernetes-dashboard

